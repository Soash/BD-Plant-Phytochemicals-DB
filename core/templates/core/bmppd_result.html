{% extends 'base.html' %}
{% load static %}



{% block extra_css %}
<link rel="stylesheet" href="{% static 'styles.css' %}">
{% endblock extra_css %}
  

{% block content %}

<section class="text-center d-flex align-items-center">
  <div class="container mt-5">
    <h1 class="fw-bold">Bangladeshi Medicinal Plant <br> Phytochemicals Database</h1>
    <p class="text-muted">1<sup>st</sup> Medicinal Plant Phytochemicals Database in Bangladesh</p>


    <form method="get" action="{% url 'bmppd_result' %}" class="hero-search">
      <div class="search-pill">
        <input
          type="text"
          name="q"
          value="{{ query }}"
          placeholder="Search by plant name, common name, compound, CID"
          aria-label="Search"
        >
        <button type="submit">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
      </div>
    </form>

  </div>
</section>

<!-- SEARCH RESULTS -->
{% if query %}
	<section class="container mt-5">

	<h5 class="mb-3">
		Search results for "<strong>{{ query }}</strong>"
	</h5>

	{% if results %}
		<div class="table-responsive">
			<table id="resultsTable" class="table table-striped table-bordered table-hover">
				<thead class="table-dark">
					<tr>
						<th>Plant Name</th>
						<th>Common Name(s)</th>
						<th>Phytochemical</th>
						<th>CID</th>
						<th>Reference</th>
					</tr>
				</thead>
				<tbody>
					{% for r in results %}
						<tr>
							<td>{{ r.plant_name }}</td>
							<td>
								{% if r.common_name %}
								{{ r.common_name }}
								{% else %}
								-
								{% endif %}
							</td>
							<td>{{ r.compound_name }}</td>
							<td>CID: {{ r.cid|default:"-" }}</td>
							<td>
								{% if r.reference %}
								{% comment %} <a href="{{ r.reference }}" target="_blank" rel="noopener">Link</a> {% endcomment %}

								<a href="{% url 'reference' %}?ref={{ r.reference|urlencode }}">
									Link
								</a>
								{% else %}
								-
								{% endif %}
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	{% else %}
		<p class="text-muted">No results found for your query.</p>
	{% endif %}

	</section>
{% endif %}


{% endblock %}

{% block extra_js %}
{% endblock extra_js %}


